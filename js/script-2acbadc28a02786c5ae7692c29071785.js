!function(s){var a=function(t,a){a=a||0;var n=t.getBoundingClientRect();return n.top>=-a&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)+a},t=s("#search-form-wrap"),n=!1,e=function(){n=!0},o=function(t){setTimeout(function(){n=!1,t&&t()},200)};s("#nav-search-btn").on("click",function(){n||(e(),t.addClass("on"),o(function(){s(".search-form-input").focus()}))}),s(".search-form-input").on("blur",function(){e(),t.removeClass("on"),o()}),s("body").on("click",function(){s(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var a=s(this),n=a.attr("data-url"),e=encodeURIComponent(n),o="article-share-box-"+a.attr("data-id"),i=a.offset();if(s("#"+o).length){if((c=s("#"+o)).hasClass("on"))return void c.removeClass("on")}else{var r=['<div id="'+o+'" class="article-share-box">','<input class="article-share-input" value="'+n+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+e+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+e+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+e+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+e+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join(""),c=s(r);s("body").append(c)}s(".article-share-box.on").hide(),c.css({top:i.top+30,left:i.left+28}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){s(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}),s(".article-entry").each(function(t){s(this).find("img").each(function(){if(!s(this).parent().hasClass("fancybox")){var t=this.alt;t&&s(this).after('<span class="caption">'+t+"</span>"),s(this).wrap('<a href="'+this.src+'" title="'+t+'" class="fancybox"></a>')}}),s(this).find(".fancybox").each(function(){s(this).attr("rel","article"+t)})}),s.fancybox&&s(".fancybox").fancybox();var i=s("#container"),r=!1;function c(){var t=s("[data-lazy-src]");0!=t.length?t.each(function(){var t=s(this);a(this,500)&&t.css("background-image","url("+t.data("lazy-src")+")").removeAttr("data-lazy-src")}):s(window).off("scroll.lazy-loading")}s("#main-nav-toggle").on("click",function(){r||(r=!0,i.toggleClass("mobile-nav-on"),setTimeout(function(){r=!1},200))}),s("#wrap").on("click",function(){!r&&i.hasClass("mobile-nav-on")&&i.removeClass("mobile-nav-on")}),s(window).on("scroll.lazy-loading",function(o){var i=arguments.length<=1||void 0===arguments[1]?100:arguments[1],r=null;return function(){for(var t=this,a=arguments.length,n=Array(a),e=0;e<a;e++)n[e]=arguments[e];null===r&&(r=setTimeout(function(){o.apply(t,n),r=null},i))}}(c,200)),c()}(jQuery);